{% extends 'base.html.twig' %}
{% set title = item.Name %}

{% block body %}
<script>let itemId = {{ item.ID }};</script>
<div class="product">

    <div>
        <span class="icon icon-rarity-{{ item.Rarity }}">
            <img src="{{ item.ID|icon3x }}">
        </span>
        <div class="menu">
            <h4>
                <strong>(DC)</strong> {{ server.dc }}
            </h4>

            <button type="button" data-tab="summary" class="btn-summary"><span class="xiv-Market cw-summary"></span> Summary</button>

            {% for serverName in server.dc_servers %}
                {% set icon = serverName == server.name ? 'ItemShard cw-home' : 'PaintBorder' %}
                {% set className = serverName == server.name ? 'home-world open' : '' %}
                <button type="button" data-tab="cw{{ serverName }}" class="{{ className }}"><span class="xiv-{{ icon }}"></span> {{ serverName }} <em>{{ attribute(market, serverName).Prices|length|number_format }}</em></button>
            {% endfor %}
        </div>
    </div>
    <div>
        {# title #}
        <h1 class="rarity-{{ item.Rarity }}">{{ item.Name }}</h1>

        {# info #}
        <div class="info">
            <button class="product-search-cat" data-tippy-content="Open Market Category: {{ item.ItemSearchCategory.Name }}" data-cat="{{ item.ItemSearchCategory.ID }}">
                <i class="xiv-{{ item.ItemSearchCategory.ID|xivicon }}"></i>
            </button>
            <span>{{ item.ItemKind.Name }}</span>
            <span class="product-item-kind">{{ item.ItemUICategory.Name }}</span>
            <span>
                <em>On Sale</em>{{ attribute(market, server.name).Prices|length|number_format }}
                &nbsp;&nbsp;
                <img src="/i/game/hq.png">
                34
            </span>
            <span>
                <em>History</em>{{ attribute(market, server.name).History|length|number_format }}
                &nbsp;&nbsp;
                <img src="/i/game/hq.png">
                22
            </span>
        </div>

        <div class="tab">
            {# Cross World #}
            <div class="tab-page tab-summary">
                Cross-World Summary
            </div>
            {% for serverName in server.dc_servers %}
                {% set open = serverName == server.name ? 'open' : '' %}
                <div class="tab-page tab-cw{{ serverName }} {{ open }}">
                    <div class="tab-page-header">
                        <div>
                            <button data-tab="cw-prices" class="active">Prices</button>
                            <button data-tab="cw-history">History</button>
                        </div>
                        <h1>{{ serverName }}</h1>
                    </div>
                    <div class="cw-table cw-prices open">
                        {% include 'Product/prices.html.twig' with { 'prices': attribute(market, serverName).Prices } %}
                    </div>
                    <div class="cw-table cw-history">
                        {% include 'Product/history.html.twig' with { 'history': attribute(market, serverName).History } %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <div>
        <div class="box">
            {% include 'Product/item_updated.html.twig' %}
        </div>

        <div class="box box_lists">
            {% include 'Product/lists.html.twig' %}
        </div>

        <div class="box box-alerts">
            {% include 'Product/alerts.html.twig' %}
        </div>



        <div class="box">
            {% include 'Product/friends.html.twig' %}
        </div>

        {# Multi-Language display #}
        <div class="box box-language">
            {% include 'Product/language.html.twig' %}
        </div>

        {# Team Craft #}
        <div class="box box_teamcraft">
            {% include 'Product/teamcraft.html.twig' %}
        </div>

        {# Third Party Links #}
        <div class="box box_third_party">
            {% include 'Product/third_party.html.twig' %}
        </div>

        <div class="box box_item_details">
            {% include 'Product/item_details.html.twig' %}
        </div>

    </div>

</div>
{% endblock %}
