var mogboard=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/ui/",r(r.s="UmG/")}({"UmG/":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r.r(t);var n=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.icons={success:"xiv-SymbolCheck",error:"xiv-SymbolCross",warning:"xiv-SymbolAlert",info:"xiv-SymbolQuestion"},this.ui=$(".popup"),this.ui.on("click",function(e){t.close()})}var t,r,n;return t=e,(r=[{key:"success",value:function(e,t){this.setPopupIcon("success").setTitle(e).setMessage(t).open()}},{key:"error",value:function(e,t){this.setPopupIcon("error").setTitle(e).setMessage(t).open()}},{key:"warning",value:function(e,t){console.log("title = "+e),this.setPopupIcon("warning").setTitle(e).setMessage(t).open()}},{key:"info",value:function(e,t){this.setPopupIcon("info").setTitle(e).setMessage(t).open()}},{key:"setTitle",value:function(e){return this.ui.find("h1").html(e),this}},{key:"setMessage",value:function(e){return this.ui.find("p").html(e),this}},{key:"open",value:function(){return this.ui.addClass("open"),this}},{key:"close",value:function(){return this.ui.removeClass("open"),this}},{key:"setPopupIcon",value:function(e){return this.ui.find(".popup_icon").attr("data-type",e),this.ui.find(".popup_icon i").removeClass(),this.ui.find(".popup_icon i").addClass(this.icons[e]),this}}])&&i(t.prototype,r),n&&i(t,n),e}());function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modalCover=$(".modal_cover")}var t,r,i;return t=e,(r=[{key:"add",value:function(e,t){var r=this;t.on("click",function(t){r.modalCover.addClass("open"),e.addClass("open")}),this.modalCover.on("click",function(t){r.modalCover.removeClass("open"),e.removeClass("open")})}},{key:"close",value:function(e){this.modalCover.removeClass("open"),e.removeClass("open")}}])&&a(t.prototype,r),i&&a(t,i),e}());function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=r("p46w"),c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiModal=$(".modal_settings"),this.uiModalButton=$(".btn-settings"),this.defaultLanguage="en",this.storageKeyServer="mogboard_server",this.storageKeyLanguage="mogboard_language",this.server=this.getServer(),this.language=this.getLanguage()}var t,r,i;return t=e,(r=[{key:"init",value:function(){var e=this,t=this.getServer(),r=this.getLanguage();this.setLanguage(this.defaultLanguage),null!==t&&0!==t.length?(this.setServer(t),this.setLanguage(r),this.uiModal.find("select.servers").val(t),this.uiModal.find("select.languages").val(r)):setTimeout(function(){e.uiModalButton.trigger("click")},500)}},{key:"watch",value:function(){var e=this;o.add(this.uiModal,this.uiModalButton),this.uiModal.find(".servers").on("change",function(t){e.setServer($(t.currentTarget).val()),n.success("Cookie Set","Page reloading, please wait!"),location.reload(!0)}),this.uiModal.find(".languages").on("change",function(t){e.setLanguage($(t.currentTarget).val())})}},{key:"setServer",value:function(e){localStorage.setItem(this.storageKeyServer,e),l.set(this.storageKeyServer,e,{expires:365,path:"/"})}},{key:"getServer",value:function(){return localStorage.getItem(this.storageKeyServer)}},{key:"setLanguage",value:function(e){localStorage.setItem(this.storageKeyLanguage,e),l.set(this.storageKeyLanguage,e,{expires:365,path:"/"})}},{key:"getLanguage",value:function(){return localStorage.getItem(this.storageKeyLanguage)}}])&&s(t.prototype,r),i&&s(t,i),e}());function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButton=$(".user-btn"),this.uiMenu=$(".user-menu")}var t,r,i;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiButton.on("click",function(t){e.uiMenu.toggleClass("open")}),$(document).mouseup(function(t){var r=e.uiButton,i=e.uiMenu;r.is(t.target)||0!==r.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||e.uiMenu.removeClass("open")})}}])&&u(t.prototype,r),i&&u(t,i),e}());function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"getItemCategoryList",value:function(e,t){var r=mog.url_item_category_list.replace("-id-",e);fetch(r,{mode:"cors"}).then(function(e){return e.text()}).then(t)}},{key:"getItemPrices",value:function(e,t,r){var i=mog.url_item_price.replace("-server-",e).replace("-id-",t);fetch(i,{mode:"cors"}).then(function(e){return e.text()}).then(r)}},{key:"getItemHistory",value:function(e,t,r){var i=mog.url_item_history.replace("-server-",e).replace("-id-",t);fetch(i,{mode:"cors"}).then(function(e){return e.text()}).then(r)}},{key:"getItemPricesCrossWorld",value:function(e,t,r){var i=mog.url_item_cross_world.replace("-server-",e).replace("-id-",t);fetch(i,{mode:"cors"}).then(function(e){return e.text()}).then(r)}}])&&h(t.prototype,r),i&&h(t,i),e}());function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButton=$(".btn-market-board"),this.uiView=$(".market-board-container"),this.uiCategory=$(".market-category-container"),this.uiLazy=null,this.viewActive=!1}var t,r,i;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiButton.on("click",function(t){e.uiView.addClass("open")}),this.uiView.find("button").on("click",function(t){var r=$(t.currentTarget).attr("id");e.openCategory(r)}),$(document).mouseup(function(t){var r=e.uiButton,i=e.uiView;r.is(t.target)||0!==r.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||e.uiView.removeClass("open")}),$(document).mouseup(function(t){var r=e.uiCategory;r.is(t.target)||0!==r.has(t.target).length||(e.uiCategory.removeClass("open"),e.viewActive=!1)}),this.uiCategory.find(".market-category").on("click","a",function(t){e.uiCategory.find(".market-category").html('<div class="loading"><img src="/i/svg/loading2.svg"></div>')})}},{key:"openCategory",value:function(e){var t=this;this.uiView.removeClass("open"),this.uiCategory.addClass("open"),this.uiCategory.find(".market-category").html('<div class="loading"><img src="/i/svg/loading2.svg"></div>'),f.getItemCategoryList(e,function(e){t.uiCategory.find(".market-category").html(e),t.viewActive=!0,t.setSearchHeight(),t.uiLazy=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-category-list"),effect:"fadeIn",visibleOnly:!1,bind:"event"})})}},{key:"setSearchHeight",value:function(){if(this.viewActive){var e=$(".item-category-list"),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-260;e.css({height:"".concat(t,"px")})}}},{key:"setLoadingLazyLoadWatcher",value:function(){var e=this;new SimpleBar(document.getElementById("item-category-list")).getScrollElement().addEventListener("scroll",function(t){e.uiLazy.data("plugin_lazy").update()})}}])&&g(t.prototype,r),i&&g(t,i),e}());function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"get",value:function(e,t,r){(t=t||{}).language=c.getLanguage(),e=e+"?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),fetch("https://xivapi.com".concat(e),{mode:"cors"}).then(function(e){return e.json()}).then(r)}},{key:"search",value:function(e,t){var r={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Icon,Name,LevelItem,Rarity,ItemSearchCategory.Name,ItemSearchCategory.ID,ItemKind.Name",string:e.trim(),limit:100};this.get("/search",r,t)}},{key:"getCharacter",value:function(e,t){this.get("/character/".concat(e),{},t)}},{key:"searchCharacter",value:function(e,t,r){this.get("/character/search",{name:e,server:t},r)}},{key:"getItem",value:function(e,t){this.get("/Item/".concat(e),{},t)}},{key:"getServerList",value:function(e){this.get("/servers/dc",{},e)}}])&&v(t.prototype,r),i&&v(t,i),e}());function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiInput=$("input.search"),this.uiView=$(".search-results-container"),this.uiLazy=null,this.timeout=null,this.timeoutDelay=350,this.searching=!1,this.searchTerm=null}var t,r,i;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiInput.on("keyup",function(t){clearTimeout(e.timeout);var r=$(t.currentTarget).val().trim();if(e.uiInput.removeClass("complete"),0===r.length?e.uiInput.removeClass("typing"):e.uiInput.addClass("typing"),0===r.length)return e.searchTerm="",void e.uiView.removeClass("open");e.searching||e.searchTerm===r||r.length<2||(e.timeout=setTimeout(function(){e.searchTerm=$(t.currentTarget).val().trim(),e.uiView.addClass("open"),e.searching=!0,p.search(r,function(t){e.render(t)})},e.timeoutDelay))}),this.uiInput.on("click",function(t){e.searchTerm&&e.searchTerm.length>1&&e.uiView.addClass("open")}),$(document).mouseup(function(t){var r=e.uiView,i=e.uiInput;r.is(t.target)||0!==r.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||(e.uiView.removeClass("open"),e.uiInput.removeClass("complete typing"))}),$(window).on("resize",function(t){e.setSearchHeight()})}},{key:"render",value:function(e){var t=this;this.uiInput.removeClass("typing"),this.uiInput.addClass("complete"),this.searching=!1;var r=[];e.Results.forEach(function(e,t){var i=mog.url_item.replace("-id-",e.ID);r.push('<a href="'.concat(i,'" class="rarity-').concat(e.Rarity,'">\n                    <span><img src="http://xivapi.com/mb/loading.svg" class="lazy" data-src="https://xivapi.com').concat(e.Icon,'"></span>\n                    <span class="item-level">').concat(e.LevelItem,"</span>\n                    ").concat(e.Name,'\n                    <span class="item-category">').concat(e.ItemSearchCategory.Name,"</span>\n                </a>"))}),this.uiView.find(".search-results").html('\n            <div class="item-search-header">\n                <div>\n                    Found '.concat(e.Pagination.Results," / ").concat(e.Pagination.ResultsTotal," for <strong>").concat(this.searchTerm,'</strong>\n                </div>\n                <div>\n                    <button class="btn-filters"><icon class="xiv-MarketFilter"></icon> Filters</button>\n                </div>\n            </div>\n            <div data-simplebar class="item-search-list" id="item-search-list">').concat(r.join(""),"</div>\n        ")),this.uiLazy=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-search-list"),effect:"fadeIn",visibleOnly:!1,bind:"event"}),this.setSearchHeight(),new SimpleBar(document.getElementById("item-search-list")).getScrollElement().addEventListener("scroll",function(e){t.uiLazy.data("plugin_lazy").update()}),this.uiView.addClass("open")}},{key:"setSearchHeight",value:function(){if(this.searchTerm){var e=$(".item-search-list"),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-260;e.css({height:"".concat(t,"px")})}}}])&&y(t.prototype,r),i&&y(t,i),e}());function b(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"start",value:function(e){e.attr("data-text",e.html()),e.addClass("loading_interaction"),e.prop("disabled",!0),e.css({"min-width":"".concat(e.width(),"px"),"min-height":"".concat(e.height(),"px"),display:"inline-block"}),e.html("&nbsp;")}},{key:"finish",value:function(e){var t=e.attr("data-text");e.removeClass("loading_interaction"),e.prop("disabled",!1),e.html(t)}},{key:"disable",value:function(e,t){e.attr("data-text",e.html()),e.removeClass("loading_interaction"),e.prop("disabled",!0),e.html(t)}}])&&b(t.prototype,r),i&&b(t,i),e}());function k(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButtons=$(".product .menu"),this.uiTabs=$(".product .tab"),this.uiCategory=$(".product .product-search-cat"),this.uiRefreshButton=$(".btn_request_update")}var t,r,i;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiButtons.find("button").on("click",function(t){var r=$(t.currentTarget).attr("data-tab");e.switchTab(t,r)}),this.uiTabs.find(".tab-page button").on("click",function(t){var r=$(t.currentTarget).attr("data-tab");e.switchTabView(t,r)}),this.uiCategory.on("click",function(e){var t=$(e.currentTarget).attr("data-cat");m.openCategory(t)}),$(document).scroll(function(t){var r=$(document).scrollTop(),i=e.uiButtons;r>=300?i.addClass("fixed"):i.removeClass("fixed")}),this.uiRefreshButton.on("click",function(t){C.start(e.uiRefreshButton),$.ajax({url:mog.url_item_refresh.replace("-id-",itemId),success:function(t){n.success("Prioritised!","This item has been bumped to the front of the queue. Check back in a minute and the prices/history should have been updated."),C.disable(e.uiRefreshButton,"Queued"),e.uiRefreshButton.addClass("btn-green-outline").removeClass("btn-green")},error:function(e,t,r){n.error("Error 37","Could not request item pricing refresh"),console.log("--- ERROR ---"),console.log(e,t,r)}})})}},{key:"switchTab",value:function(e,t){this.uiButtons.find("button.open").removeClass("open"),this.uiTabs.find(".tab-page.open").removeClass("open"),$(e.currentTarget).addClass("open"),this.uiTabs.find(".tab-".concat(t)).addClass("open")}},{key:"switchTabView",value:function(e,t){var r=this.uiTabs.find(".tab-page.open");r.find("button.active").removeClass("active"),r.find("div.cw-table").removeClass("open"),r.find('button[data-tab="'.concat(t,'"]')).addClass("active"),r.find(".".concat(t)).addClass("open")}}])&&k(t.prototype,r),i&&k(t,i),e}());function T(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var I=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTriggers=15,this.deleteId=null,this.editId=null,this.alert=this.getAlertTemplate(),this.uiForm=$(".alert_form"),this.uiTriggers=$(".alert_entries"),this.uiAlerts=$(".alerts_table"),this.uiDeleteConfirm=$(".btn_alert_delete_confirm")}var t,r,i;return t=e,(r=[{key:"getAlertTemplate",value:function(){return{alert_item_id:"market"==mog.path?itemId:null,alert_name:null,alert_nq:null,alert_hq:null,alert_dc:null,alert_notify_discord:null,alert_notify_email:null,alert_triggers:[],alert_type:null}}},{key:"watch",value:function(){var e=this;"market"==mog.path&&(this.uiForm.on("click",".alert_trigger_add",function(t){e.addCustomTrigger(t)}),this.uiForm.on("click",".alert_trigger_remove",function(t){e.removeCustomTrigger(t)}),this.uiForm.on("click",".btn_create_alert",function(t){e.saveAlert(t)}),this.uiForm.on("click",".btn_new_alert",function(t){e.newAlert(t)}),this.uiAlerts.on("click",".btn_alert_delete",function(t){e.deleteAlert(t)}),this.uiAlerts.on("click",".btn_alert_edit",function(t){e.editAlert(t)}),this.loadAlerts(),this.uiDeleteConfirm.on("click",function(t){e.deleteAlertConfirmation()}),o.add($(".alert_info"),$(".alert_info_button button")))}},{key:"addCustomTrigger",value:function(e){if(e.preventDefault(),this.alert.alert_triggers.length>=this.maxTriggers)n.error("Max Triggers Reached","You can add a maximum of ".concat(this.maxTriggers," to a single alert. Sorry!"));else{var t={id:Math.floor(99999*Math.random()+1),alert_trigger_field:this.uiForm.find("#alert_trigger_field").val().trim(),alert_trigger_op:this.uiForm.find("#alert_trigger_op").val().trim(),alert_trigger_value:this.uiForm.find("#alert_trigger_value").val().trim()};this.addCustomTriggerVisual(t,!0)}}},{key:"addCustomTriggerVisual",value:function(e,t){if(0!==e.alert_trigger_value.length){var r=e.alert_trigger_field.split("_")[0];if(t){if(null==this.alert.alert_type)this.alert.alert_type=r;else if(r!=this.alert.alert_type)return void n.error("Mismatch Data Types","You cannot mix Prices or History triggers in the same alert.");if(["Prices_IsCrafted","Prices_IsHQ","Prices_HasMateria","History_IsHQ"].indexOf(e.alert_trigger_field)>-1){if(-1===["0","1"].indexOf(e.alert_trigger_value))return void n.error("Invalid Condition Value","For the selected trigger field, <br> your trigger value must either be: <br> a 0 (False/No) OR a 1 (True/Yes).");if(-1===["5","6"].indexOf(e.alert_trigger_op))return void n.error("Invalid Operator","For the selected trigger field, <br> your trigger operator must be either: <br> = Equal-to OR != Not equal-to")}}this.alert.alert_triggers.push(e),this.uiTriggers.append('\n            <div id="custom_trigger_'.concat(e.id,'">\n                <div><button type="button" class="alert_trigger_remove small" data-id="').concat(e.id,'"><i class="xiv-NavigationClose"></i></button></div>\n                <div>\n                    <code>\n                        <span>').concat(e.alert_trigger_field,"</span>\n                        <em>").concat(alert_trigger_operators[e.alert_trigger_op],":</em>\n                        <strong>").concat(e.alert_trigger_value,"</strong>\n                    </code>\n                </div>\n            </div>\n        "))}else n.error("Invalid Condition Value","The triggers condition value is empty.")}},{key:"removeCustomTrigger",value:function(e){var t=this,r=$(e.currentTarget).attr("data-id");this.uiForm.find("#custom_trigger_".concat(r)).remove(),this.alert.alert_triggers.forEach(function(e,i){e.id==r&&t.alert.alert_triggers.splice(i,1)}),0===this.alert.alert_triggers.length&&(this.alert.alert_type=null)}},{key:"saveAlert",value:function(e){var t=this;if(e.preventDefault(),this.alert.alert_name=this.uiForm.find("#alert_name").val().trim(),this.alert.alert_nq=this.uiForm.find("#alert_nq").prop("checked"),this.alert.alert_hq=this.uiForm.find("#alert_hq").prop("checked"),this.alert.alert_dc=this.uiForm.find("#alert_dc").prop("checked"),this.alert.alert_notify_discord=this.uiForm.find("#alert_notify_discord").prop("checked"),this.alert.alert_notify_email=this.uiForm.find("#alert_notify_email").prop("checked"),this.alert.alert_name.length<3||this.alert.alert_name.length>100)n.error("Name Length","Please keep your alert name <br> between 4 and 100 characters");else if(!1!==this.alert.alert_hq||!1!==this.alert.alert_nq)if(!1!==this.alert.alert_notify_discord||!1!==this.alert.alert_notify_email)if(0!==this.alert.alert_triggers.length){var r=this.uiForm.find(".btn_create_alert");C.start(r);var i=this.editId?mog.urls.alerts.update.replace("-id-",this.editId):mog.urls.alerts.create;$.ajax({url:i,type:"POST",dataType:"json",data:JSON.stringify(this.alert),contentType:"application/json",success:function(e){!0===e&&(n.success("Alert Saved","Your alert has been saved!"),t.loadAlerts())},error:function(e,t,r){n.error("Error 23","Could not create the alert. Ask Vek why!"),console.log("--- ERROR ---"),console.log(e,t,r)},complete:function(){C.finish(r)}})}else n.error("No Triggers","You have not set any triggers <br> on your alert, fix that!");else n.error("Error: Notification","You must choose to be notified <br> either by discord or by email.");else n.error("Error: HQ/NQ","You must choose either: <br> Normal Quality, High-Quality or Both.")}},{key:"loadAlerts",value:function(){var e=this;!1!==mog.isOnline&&$.ajax({url:mog.urls.alerts.renderForItem.replace("-id-",itemId),success:function(t){e.uiAlerts.html(t),o.add($(".alert_delete_confirmation_modal"),$(".btn_alert_delete"))},error:function(t,r,i){e.uiAlerts.html('<div class="alert-red">Could not load any alerts for this item.</div>'),console.log("--- ERROR ---"),console.log(t,r,i)}})}},{key:"editAlert",value:function(e){var t=this;this.newAlert();var r=$(e.currentTarget);this.editId=r.attr("data-id"),C.start(r),this.toggleAlertFormLoading(!0),$.ajax({url:mog.urls.alerts.edit.replace("-id-",this.editId),type:"GET",success:function(e){t.editId=e.id,t.uiForm.find("#alert_name").val(e.alert_name),t.uiForm.find("#alert_nq").prop("checked",e.alert_nq),t.uiForm.find("#alert_hq").prop("checked",e.alert_hq),t.uiForm.find("#alert_dc").prop("checked",e.alert_dc),t.uiForm.find("#alert_notify_discord").prop("checked",e.alert_notify_discord),t.uiForm.find("#alert_notify_email").prop("checked",e.alert_notify_email),t.alert.alert_name=e.alert_name,t.alert.alert_nq=e.alert_nq,t.alert.alert_hq=e.alert_hq,t.alert.alert_dc=e.alert_dc,t.alert.alert_notify_discord=e.alert_notify_discord,t.alert.alert_notify_email=e.alert_notify_email,e.triggers.forEach(function(e,r){t.addCustomTriggerVisual({id:Math.floor(99999*Math.random()+1),alert_trigger_field:e[0],alert_trigger_op:e[1],alert_trigger_value:e[3]})}),$(".alert_form").addClass("edit_mode")},error:function(e,t,r){n.error("Error 8456","Could not fetch alert to edit."),console.log("--- ERROR ---"),console.log(e,t,r)},complete:function(){C.finish(r),t.toggleAlertFormLoading(!1)}})}},{key:"deleteAlert",value:function(e){this.deleteId=$(e.currentTarget).attr("data-id");var t=$(e.currentTarget).parents("tr").attr("data-name");$(".alert_delete_confirmation_modal").find("h1").html(t)}},{key:"deleteAlertConfirmation",value:function(){var e=this;this.newAlert();var t=mog.urls.alerts.delete.replace("-id-",this.deleteId);C.start(this.uiDeleteConfirm),$.ajax({url:t,type:"GET",success:function(t){e.loadAlerts(),n.success("Alert Deleted","This alert has been deleted")},error:function(e,t,r){n.error("Error 75","Could not delete alert."),console.log("--- ERROR ---"),console.log(e,t,r)},complete:function(){C.finish(e.uiDeleteConfirm),o.close($(".alert_delete_confirmation_modal"))}})}},{key:"newAlert",value:function(){$(".alert_form").removeClass("edit_mode"),this.deleteId=null,this.editId=null,this.alert=this.getAlertTemplate(),this.uiForm.find("#alert_name").val(""),this.uiForm.find("#alert_nq").prop("checked",!1),this.uiForm.find("#alert_hq").prop("checked",!1),this.uiForm.find("#alert_dc").prop("checked",!1),this.uiForm.find("#alert_notify_discord").prop("checked",!1),this.uiForm.find("#alert_notify_email").prop("checked",!1),this.uiTriggers.html(""),this.uiForm.find("#alert_trigger_field option:first").prop("selected",!0),this.uiForm.find("#alert_trigger_op option:first").prop("selected",!0),this.uiForm.find("#alert_trigger_value").val("")}},{key:"toggleAlertFormLoading",value:function(e){var t=$(".alert-form-loading");e?t.addClass("show"):t.removeClass("show")}}])&&T(t.prototype,r),i&&T(t,i),e}());function x(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiForm=$(".create_list_form"),this.uiModal=$(".list_modal"),this.uiModalButton=$(".btn_addto_list"),this.uiFaveButton=$(".btn_addto_fave")}var t,r,i;return t=e,(r=[{key:"watch",value:function(){var e=this;o.add(this.uiModal,this.uiModalButton),this.uiForm.on("submit",function(t){t.preventDefault();var r={itemId:e.uiForm.find("#list_item_id").val().trim(),name:e.uiForm.find("#list_name").val().trim(),option:e.uiForm.find("#list_option").val().trim()};e.create(r)}),this.uiFaveButton.on("click",function(t){e.addToFavourite()})}},{key:"addToFavourite",value:function(){var e=this;C.start(this.uiFaveButton),$.ajax({url:mog.url_lists_favourite,type:"POST",dataType:"json",data:JSON.stringify({itemId:itemId}),contentType:"application/json",success:function(t){t.state?e.uiFaveButton.addClass("on"):e.uiFaveButton.removeClass("on"),C.finish(e.uiFaveButton),e.uiFaveButton.find("span").text(t.state?"Faved":"Favourite"),o.close(e.uiModal),n.success(t.state?"Added to Faves":"Removed from Faves",t.state?"Why you love this item so much!? Added to your favourites.":"Unpopular item ey, removed from your favourites.")},error:function(e,t,r){n.error("Error 37","Could not add to favourites!"),console.log("--- ERROR ---"),console.log(e,t,r)}})}},{key:"create",value:function(e){var t=this,r=this.uiForm.find('button[type="submit"]');C.start(r),$.ajax({url:mog.url_create_alert,type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(C.finish(r),e.ok)return t.loadItemAlerts(),o.close(t.uiModal),void n.success("Alert Created","Information on this alert will appear on the homepage!");n.success("Error",e.message)},error:function(e,t,r){n.error("Error 37","Could not create alert."),console.log("--- ERROR ---"),console.log(e,t,r)}})}}])&&x(t.prototype,r),i&&x(t,i),e}());function S(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var O=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addCharacterBtn=$(".account-add-character button"),this.confirmCharacterBtn=$(".account-check-verification")}var t,r,i;return t=e,(r=[{key:"watch",value:function(){var e=this;this.addCharacterBtn.on("click",function(t){var r=$('.account-add-character input[name="string"]').val().trim(),i=$('.account-add-character select[name="server"]').val().trim();e.addCharacter(r,i)}),this.confirmCharacterBtn.on("click",function(t){var r=$(t.currentTarget).attr("data-id");C.start(e.confirmCharacterBtn),$.ajax({url:mog.urls.characters.confirm.replace("-id-",r),success:function(e){location.reload()},error:function(e,t,r){n.error("Could not confirm",e.responseJSON.Message)},complete:function(){C.finish(e.confirmCharacterBtn)}}),console.log(r)})}},{key:"addCharacter",value:function(e,t){var r=this,i=null;$.isNumeric(e)?i=e:e.indexOf("finalfantasyxiv.com")>-1&&(i=e.split("/")[5]),i?(C.start(this.addCharacterBtn),p.getCharacter(i,function(e){2===e.Info.Character.State?(console.log("Adding: ".concat(e.Character.Name)),$.ajax({url:mog.urls.characters.add,data:{lodestone_id:i},success:function(e){location.reload()},error:function(e,t,r){n.error("Could not add",e.responseJSON.Message)},complete:function(){C.finish(r.addCharacterBtn)}})):n.info("Not yet ready","This character has been put in queue to XIVAPI and will be added in a moment, please try again in a minute.")})):p.searchCharacter(e,t,function(t){if(0!==t.Results.length){var i=null;for(var a in t.Results){var o=t.Results[a];if(o.Name.toLowerCase()===e.toLowerCase()){i=o.ID;break}}null!==i?(console.log(i),r.addCharacter(i)):n.error("Could not find","Could not find your character on lodestone, try using the Lodestone URL instead.")}else alert("no results")})}}])&&S(t.prototype,r),i&&S(t,i),e}());c.init(),c.watch(),d.watch(),m.watch(),_.watch(),w.watch(),I.watch(),F.watch(),O.watch();t.default={HeaderCategories:m}},p46w:function(e,t,r){var i,n;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(a){if(void 0===(n="function"==typeof(i=a)?i.call(t,r,t,e):i)||(e.exports=n),!0,e.exports=a(),!!0){var o=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=o,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}return function t(r){function i(t,n,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var c in a)a[c]&&(l+="; "+c,!0!==a[c]&&(l+="="+a[c]));return document.cookie=t+"="+n+l}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<u.length;h++){var f=u[h].split("="),g=f.slice(1).join("=");this.json||'"'!==g.charAt(0)||(g=g.slice(1,-1));try{var m=f[0].replace(d,decodeURIComponent);if(g=r.read?r.read(g,m):r(g,m)||g.replace(d,decodeURIComponent),this.json)try{g=JSON.parse(g)}catch(e){}if(t===m){o=g;break}t||(o[m]=g)}catch(e){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,r){i(t,"",e(r,{expires:-1}))},i.withConverter=t,i}(function(){})})}}).default;