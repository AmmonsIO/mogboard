var mogboard=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/ui/",n(n.s="UmG/")}({"UmG/":function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.default="Phoenix"}var t,n,a;return t=e,(n=[{key:"init",value:function(){var e=localStorage.getItem("server");localStorage.setItem("server",e||this.default)}},{key:"getServer",value:function(){return localStorage.getItem("server")}},{key:"setServer",value:function(e){document.cookie="server=".concat(e),localStorage.setItem("server",e),this.init()}}])&&i(t.prototype,n),a&&i(t,a),e}());function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.default="eu"}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=localStorage.getItem("language");localStorage.setItem("language",e||this.default)}},{key:"getLanguage",value:function(){return localStorage.getItem("language")}},{key:"setLanguage",value:function(e){localStorage.setItem("language",e),this.init()}}])&&r(t.prototype,n),i&&r(t,i),e}());function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButton=$(".user-btn"),this.uiMenu=$(".user-menu")}var t,n,i;return t=e,(n=[{key:"watch",value:function(){var e=this;this.uiButton.on("click",function(t){e.uiMenu.toggleClass("open")}),$(document).mouseup(function(t){var n=e.uiButton,i=e.uiMenu;n.is(t.target)||0!==n.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||e.uiMenu.removeClass("open")})}}])&&s(t.prototype,n),i&&s(t,i),e}());function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getItemCategoryList",value:function(e,t){var n=mog.url_item_category_list.replace("-id-",e);fetch(n,{mode:"cors"}).then(function(e){return e.text()}).then(t)}},{key:"getItemPrices",value:function(e,t,n){var i=mog.url_item_price.replace("-server-",e).replace("-id-",t);fetch(i,{mode:"cors"}).then(function(e){return e.text()}).then(n)}},{key:"getItemHistory",value:function(e,t,n){var i=mog.url_item_history.replace("-server-",e).replace("-id-",t);fetch(i,{mode:"cors"}).then(function(e){return e.text()}).then(n)}},{key:"getItemPricesCrossWorld",value:function(e,t,n){var i=mog.url_item_cross_world.replace("-server-",e).replace("-id-",t);fetch(i,{mode:"cors"}).then(function(e){return e.text()}).then(n)}}])&&l(t.prototype,n),i&&l(t,i),e}());function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButton=$(".btn-market-board"),this.uiView=$(".market-board-container"),this.uiCategory=$(".market-category-container"),this.uiLazy=null,this.viewActive=!1}var t,n,i;return t=e,(n=[{key:"watch",value:function(){var e=this;this.uiButton.on("click",function(t){e.uiView.addClass("open")}),this.uiView.find("button").on("click",function(t){var n=$(t.currentTarget).attr("id");e.openCategory(n)}),$(document).mouseup(function(t){var n=e.uiButton,i=e.uiView;n.is(t.target)||0!==n.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||e.uiView.removeClass("open")}),$(document).mouseup(function(t){var n=e.uiCategory;n.is(t.target)||0!==n.has(t.target).length||(e.uiCategory.removeClass("open"),e.viewActive=!1)}),this.uiCategory.find(".market-category").on("click","a",function(t){e.uiCategory.find(".market-category").html('<div class="loading"><img src="/i/svg/loading2.svg"></div>')})}},{key:"openCategory",value:function(e){var t=this;this.uiView.removeClass("open"),this.uiCategory.addClass("open"),this.uiCategory.find(".market-category").html('<div class="loading"><img src="/i/svg/loading2.svg"></div>'),c.getItemCategoryList(e,function(e){t.uiCategory.find(".market-category").html(e),t.viewActive=!0,t.setSearchHeight(),t.uiLazy=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-category-list"),effect:"fadeIn",visibleOnly:!1,bind:"event"})})}},{key:"setSearchHeight",value:function(){if(this.viewActive){var e=$(".item-category-list"),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-260;e.css({height:"".concat(t,"px")})}}},{key:"setLoadingLazyLoadWatcher",value:function(){var e=this;new SimpleBar(document.getElementById("item-category-list")).getScrollElement().addEventListener("scroll",function(t){e.uiLazy.data("plugin_lazy").update()})}}])&&f(t.prototype,n),i&&f(t,i),e}());function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modalCover=$(".modal_cover")}var t,n,i;return t=e,(n=[{key:"add",value:function(e,t){var n=this;t.on("click",function(t){n.modalCover.addClass("open"),e.addClass("open")}),this.modalCover.on("click",function(t){n.modalCover.removeClass("open"),e.removeClass("open")})}},{key:"close",value:function(e){this.modalCover.removeClass("open"),e.removeClass("open")}}])&&h(t.prototype,n),i&&h(t,i),e}());function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiModal=$(".modal_settings"),this.uiModalButton=$(".btn-settings"),localStorage.getItem("server")&&a.setServer(localStorage.getItem("server")),this.uiModal.find("select.servers").val(localStorage.getItem("server")),this.uiModal.find("select.languages").val(localStorage.getItem("language"))}var t,n,i;return t=e,(n=[{key:"watch",value:function(){v.add(this.uiModal,this.uiModalButton),this.uiModal.find(".servers").on("change",function(e){a.setServer($(e.currentTarget).val())}),this.uiModal.find(".languages").on("change",function(e){o.setLanguage($(e.currentTarget).val())})}}])&&m(t.prototype,n),i&&m(t,i),e}());function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"get",value:function(e,t,n){(t=t||{}).key=mog.xivapi_key,t.tags="mogboardv2",t.language=o.getLanguage(),e=e+"?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),fetch("https://xivapi.com".concat(e),{mode:"cors"}).then(function(e){return e.json()}).then(n)}},{key:"search",value:function(e,t){var n={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Icon,Name,LevelItem,Rarity,ItemSearchCategory.Name,ItemSearchCategory.ID,ItemKind.Name",string:e.trim(),limit:100};this.get("/search",n,t)}},{key:"getItem",value:function(e,t){this.get("/Item/".concat(e),{},t)}},{key:"getServerList",value:function(e){this.get("/servers/dc",{},e)}}])&&p(t.prototype,n),i&&p(t,i),e}());function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiInput=$("input.search"),this.uiView=$(".search-results-container"),this.uiLazy=null,this.timeout=null,this.timeoutDelay=350,this.searching=!1,this.searchTerm=null}var t,n,i;return t=e,(n=[{key:"watch",value:function(){var e=this;this.uiInput.on("keyup",function(t){clearTimeout(e.timeout);var n=$(t.currentTarget).val().trim();if(e.uiInput.removeClass("complete"),0===n.length?e.uiInput.removeClass("typing"):e.uiInput.addClass("typing"),0===n.length)return e.searchTerm="",void e.uiView.removeClass("open");e.searching||e.searchTerm===n||n.length<2||(e.timeout=setTimeout(function(){e.searchTerm=$(t.currentTarget).val().trim(),e.uiView.addClass("open"),e.searching=!0,y.search(n,function(t){e.render(t)})},e.timeoutDelay))}),this.uiInput.on("click",function(t){e.searchTerm&&e.searchTerm.length>1&&e.uiView.addClass("open")}),$(document).mouseup(function(t){var n=e.uiView,i=e.uiInput;n.is(t.target)||0!==n.has(t.target).length||i.is(t.target)||0!==i.has(t.target).length||(e.uiView.removeClass("open"),e.uiInput.removeClass("complete typing"))}),$(window).on("resize",function(t){e.setSearchHeight()})}},{key:"render",value:function(e){var t=this;this.uiInput.removeClass("typing"),this.uiInput.addClass("complete"),this.searching=!1;var n=[];e.Results.forEach(function(e,t){var i=mog.url_item.replace("-id-",e.ID);n.push('<a href="'.concat(i,'" class="rarity-').concat(e.Rarity,'">\n                    <span><img src="http://xivapi.com/mb/loading.svg" class="lazy" data-src="https://xivapi.com').concat(e.Icon,'"></span>\n                    <span class="item-level">').concat(e.LevelItem,"</span>\n                    ").concat(e.Name,'\n                    <span class="item-category">').concat(e.ItemSearchCategory.Name,"</span>\n                </a>"))}),this.uiView.find(".search-results").html('\n            <div class="item-search-header">\n                <div>\n                    Found '.concat(e.Pagination.Results," / ").concat(e.Pagination.ResultsTotal," for <strong>").concat(this.searchTerm,'</strong>\n                </div>\n                <div>\n                    <button class="btn-filters"><icon class="xiv-MarketFilter"></icon> Filters</button>\n                </div>\n            </div>\n            <div data-simplebar class="item-search-list" id="item-search-list">').concat(n.join(""),"</div>\n        ")),this.uiLazy=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-search-list"),effect:"fadeIn",visibleOnly:!1,bind:"event"}),this.setSearchHeight(),new SimpleBar(document.getElementById("item-search-list")).getScrollElement().addEventListener("scroll",function(e){t.uiLazy.data("plugin_lazy").update()}),this.uiView.addClass("open")}},{key:"setSearchHeight",value:function(){if(this.searchTerm){var e=$(".item-search-list"),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-260;e.css({height:"".concat(t,"px")})}}}])&&b(t.prototype,n),i&&b(t,i),e}());function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.icons={success:"xiv-SymbolCheck",error:"xiv-SymbolCross",warning:"xiv-SymbolAlert",info:"xiv-SymbolQuestion"},this.ui=$(".popup"),this.ui.on("click",function(e){t.close()})}var t,n,i;return t=e,(n=[{key:"success",value:function(e,t){this.setPopupIcon("success").setTitle(e).setMessage(t).open()}},{key:"error",value:function(e,t){this.setPopupIcon("error").setTitle(e).setMessage(t).open()}},{key:"warning",value:function(e,t){console.log("title = "+e),this.setPopupIcon("warning").setTitle(e).setMessage(t).open()}},{key:"info",value:function(e,t){this.setPopupIcon("info").setTitle(e).setMessage(t).open()}},{key:"setTitle",value:function(e){return this.ui.find("h1").html(e),this}},{key:"setMessage",value:function(e){return this.ui.find("p").html(e),this}},{key:"open",value:function(){return this.ui.addClass("open"),this}},{key:"close",value:function(){return this.ui.removeClass("open"),this}},{key:"setPopupIcon",value:function(e){return this.ui.find(".popup_icon").attr("data-type",e),this.ui.find(".popup_icon i").removeClass(),this.ui.find(".popup_icon i").addClass(this.icons[e]),this}}])&&C(t.prototype,n),i&&C(t,i),e}());function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"start",value:function(e){var t=e.html();e.attr("data-text",t),e.addClass("btn_loading"),e.prop("disabled",!0),e.html('<i class="icon-load-c"></i>')}},{key:"finish",value:function(e){console.log("finished");var t=e.attr("data-text");e.removeClass("btn_loading"),e.prop("disabled",!1),e.html(t)}},{key:"disable",value:function(e,t){e.removeClass("btn_loading"),e.prop("disabled",!0),e.html(t)}}])&&I(t.prototype,n),i&&I(t,i),e}());function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButtons=$(".product .menu"),this.uiTabs=$(".product .tab"),this.uiCategory=$(".product .product-search-cat"),this.uiRefreshButton=$(".btn_request_update")}var t,n,i;return t=e,(n=[{key:"watch",value:function(){var e=this;this.uiButtons.find("button").on("click",function(t){var n=$(t.currentTarget).attr("data-tab");e.switchTab(t,n)}),this.uiTabs.find(".tab-page button").on("click",function(t){var n=$(t.currentTarget).attr("data-tab");e.switchTabView(t,n)}),this.uiCategory.on("click",function(e){var t=$(e.currentTarget).attr("data-cat");d.openCategory(t)}),$(document).scroll(function(t){var n=$(document).scrollTop(),i=e.uiButtons;n>=300?i.addClass("fixed"):i.removeClass("fixed")}),this.uiRefreshButton.on("click",function(t){_.start(e.uiRefreshButton),$.ajax({url:mog.url_item_refresh.replace("-id-",itemId),success:function(t){k.success("Prioritised!","This item has been bumped to the front of the queue. Check back in a minute and the prices/history should have been updated."),_.disable(e.uiRefreshButton,"Queued"),e.uiRefreshButton.addClass("btn-green-outline").removeClass("btn-green")},error:function(e,t,n){k.error("Error 37","Could not request item pricing refresh"),console.log("--- ERROR ---"),console.log(e,t,n)}})})}},{key:"switchTab",value:function(e,t){this.uiButtons.find("button.open").removeClass("open"),this.uiTabs.find(".tab-page.open").removeClass("open"),$(e.currentTarget).addClass("open"),this.uiTabs.find(".tab-".concat(t)).addClass("open")}},{key:"switchTabView",value:function(e,t){var n=this.uiTabs.find(".tab-page.open");n.find("button.active").removeClass("active"),n.find("div.cw-table").removeClass("open"),n.find('button[data-tab="'.concat(t,'"]')).addClass("active"),n.find(".".concat(t)).addClass("open")}}])&&T(t.prototype,n),i&&T(t,i),e}());function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var x=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiForm=$(".create_alert_form"),this.uiModal=$(".alert_modal"),this.uiModalButton=$(".btn_create_alert"),this.uiInfoModal=$(".alert_info"),this.uiInfoModalButton=$(".btn_alert_info"),this.uiExistingAlerts=$(".existing_alerts")}var t,n,i;return t=e,(n=[{key:"watch",value:function(){var e=this;v.add(this.uiModal,this.uiModalButton),v.add(this.uiInfoModal,this.uiInfoModalButton),this.uiForm.on("submit",function(t){t.preventDefault();var n={itemId:e.uiForm.find("#alert_item_id").val().trim(),name:e.uiForm.find("#alert_name").val().trim(),option:e.uiForm.find("#alert_option").val().trim(),value:e.uiForm.find("#alert_value").val().trim(),nq:e.uiForm.find("#alert_nq").prop("checked"),hq:e.uiForm.find("#alert_hq").prop("checked"),dc:e.uiForm.find("#alert_dc").prop("checked"),email:e.uiForm.find("#alert_notify_email").prop("checked"),discord:e.uiForm.find("#alert_notify_discord").prop("checked")};e.createItemAlert(n)})}},{key:"createItemAlert",value:function(e){var t=this;if(!1!==(!isNaN(parseFloat(e.value))&&isFinite(e.value))){var n=this.uiForm.find("button.btn_create_alert");_.start(n),$.ajax({url:mog.urls.alerts.create,type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(_.finish(n),e)return t.renderItemAlerts(),v.close(t.uiModal),void k.success("Alert Created","Information on this alert will appear on the homepage!");k.success("Error",e.message)},error:function(e,t,n){k.error("Error 37","Could not create alert."),console.log("--- ERROR ---"),console.log(e,t,n)}})}else k.warning("Invalid Alert","The alert Condition Value is not a valid number.")}},{key:"renderItemAlerts",value:function(){var e=this;$.ajax({url:mog.urls.alerts.renderForItem.replace("-id-",itemId),contentType:"application/json",success:function(t){e.uiExistingAlerts.html(t)},error:function(t,n,i){e.uiExistingAlerts.html("Could not obtain alerts for this item."),console.log("--- ERROR ---"),console.log(t,n,i)}})}}])&&M(t.prototype,n),i&&M(t,i),e}());function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiForm=$(".create_list_form"),this.uiModal=$(".list_modal"),this.uiModalButton=$(".btn_addto_list"),this.uiFaveButton=$(".btn_addto_fave")}var t,n,i;return t=e,(n=[{key:"watch",value:function(){var e=this;v.add(this.uiModal,this.uiModalButton),this.uiForm.on("submit",function(t){t.preventDefault();var n={itemId:e.uiForm.find("#list_item_id").val().trim(),name:e.uiForm.find("#list_name").val().trim(),option:e.uiForm.find("#list_option").val().trim()};e.create(n)}),this.uiFaveButton.on("click",function(t){e.addToFavourite()})}},{key:"addToFavourite",value:function(){var e=this;_.start(this.uiFaveButton),$.ajax({url:mog.url_lists_favourite,type:"POST",dataType:"json",data:JSON.stringify({itemId:itemId}),contentType:"application/json",success:function(t){t.state?e.uiFaveButton.addClass("on"):e.uiFaveButton.removeClass("on"),_.finish(e.uiFaveButton),e.uiFaveButton.find("span").text(t.state?"Faved":"Favourite"),v.close(e.uiModal),k.success(t.state?"Added to Faves":"Removed from Faves",t.state?"Why you love this item so much!? Added to your favourites.":"Unpopular item ey, removed from your favourites.")},error:function(e,t,n){k.error("Error 37","Could not add to favourites!"),console.log("--- ERROR ---"),console.log(e,t,n)}})}},{key:"create",value:function(e){var t=this,n=this.uiForm.find('button[type="submit"]');_.start(n),$.ajax({url:mog.url_create_alert,type:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){if(_.finish(n),e.ok)return t.loadItemAlerts(),v.close(t.uiModal),void k.success("Alert Created","Information on this alert will appear on the homepage!");k.success("Error",e.message)},error:function(e,t,n){k.error("Error 37","Could not create alert."),console.log("--- ERROR ---"),console.log(e,t,n)}})}}])&&j(t.prototype,n),i&&j(t,i),e}());a.init(),o.init(),u.watch(),d.watch(),g.watch(),w.watch(),S.watch(),x.watch(),E.watch();t.default={HeaderCategories:d,ProductAlerts:x}}}).default;